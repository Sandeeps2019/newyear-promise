<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Daily Promise</title>
  <meta name="description" content="Scan to receive a random promise from Scripture and blessings.">
  <style>
    :root{
      --bg:#0f172a; /* slate-900 */
      --card:#111827ee; /* gray-900 */
      --accent:#fbbf24; /* amber-400 */
      --text:#e5e7eb; /* gray-200 */
      --muted:#94a3b8; /* slate-400 */
    }
    html,body{height:100%}
    body{
      margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, "Noto Sans", Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background:
        radial-gradient(1200px 600px at 100% 0%, #1e293b 0%, transparent 60%),
        radial-gradient(900px 500px at 0% 100%, #111827 0%, transparent 60%),
        var(--bg);
      color:var(--text);
      display:flex; align-items:center; justify-content:center;
      padding:24px;
    }
    .card{
      max-width:860px; width:100%;
      background:linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
      border:1px solid rgba(255,255,255,0.1);
      border-radius:16px; box-shadow:0 20px 80px rgba(0,0,0,0.45);
      backdrop-filter: blur(8px);
      padding:22px 22px 18px;
    }
    h1{font-size: clamp(22px, 4.5vw, 32px); margin:0 0 8px; letter-spacing:0.3px}
    .subtitle{color:var(--muted); font-size:clamp(13px,2.6vw,15px); margin-bottom:16px}
    blockquote{
      font-size: clamp(18px, 4.6vw, 26px);
      line-height:1.35; margin:16px 0; color:#fff;
    }
    .ref{color:var(--accent); font-weight:600; font-size:0.95em}
    .btns{display:flex; gap:10px; flex-wrap:wrap; margin-top:14px}
    button{
      background:#1f2937; color:#e5e7eb; border:1px solid #374151; border-radius:10px;
      padding:10px 14px; font-size:15px; cursor:pointer; transition:.2s transform ease, .2s background ease;
    }
    button:hover{ transform: translateY(-1px); background:#111827 }
    .small{font-size:12px; color:var(--muted); margin-top:10px}
    .footer{margin-top:14px; display:flex; justify-content:space-between; gap:10px; align-items:center; flex-wrap:wrap}
    .count{color:var(--muted); font-size:13px}
  </style>
</head>
<body>
  <main class="card" role="main" aria-live="polite">
    <h1>Today's Promise</h1>
    <div class="subtitle">Each scan shows one random promise from the Scriptures to encourage you.</div>

    <blockquote id="text"></blockquote>
    <div class="ref" id="ref"></div>

    <div class="btns">
      <button id="shuffle" aria-label="Show another promise">Show another</button>
      <button id="copy" aria-label="Copy this promise">Copy</button>
      <button id="share" aria-label="Share" style="display:none">Share</button>
    </div>

    <div class="footer">
      <div class="count" id="count"></div>
      <div class="small">Tip: Add this page to your Home Screen for 1-tap daily encouragement.</div>
    </div>
  </main>
  <script>  
    // --- Data ---------------------------------------------------------------
    const PROMISES = [
      {t:`May the Lord bless you and keep you; may His face shine upon you and be gracious to you; the Lord turn His face toward you and give you peace.`, r:"Numbers 6:24-26"},
      {t:`Commit to the Lord whatever you do, and He will establish your plans.`, r:"Proverbs 16:3"},
      {t:`Trust in the Lord with all your heart and lean not on your own understanding; in all your ways submit to Him, and He will make your paths straight.`, r:"Proverbs 3:5-6"},
      {t:`The Lord is my shepherd, I lack nothing. He makes me lie down in green pastures, He leads me beside quiet waters, He refreshes my soul.`, r:"Psalm 23:1-3"},
      {t:`For I know the plans I have for you, declares the Lord, plans to prosper you and not to harm you, plans to give you hope and a future.`, r:"Jeremiah 29:11"},
      {t:`The steadfast love of the Lord never ceases; His mercies never come to an end; they are new every morning; great is your faithfulness.`, r:"Lamentations 3:22-23"},
      {t:`But those who hope in the Lord will renew their strength. They will soar on wings like eagles; they will run and not grow weary, they will walk and not be faint.`, r:"Isaiah 40:31"},
      {t:`I can do all this through Him who gives me strength.`, r:"Philippians 4:13"},
      {t:`The Lord will fight for you; you need only to be still.`, r:"Exodus 14:14"},
      {t:`Cast all your anxiety on Him because He cares for you.`, r:"1 Peter 5:7"},
      {t:`And we know that in all things God works for the good of those who love Him, who have been called according to His purpose.`, r:"Romans 8:28"},
      {t:`Rejoice in the Lord always. I will say it again: Rejoice!`, r:"Philippians 4:4"},
      {t:`Be strong and courageous. Do not be afraid; do not be discouraged, for the Lord your God will be with you wherever you go.`, r:"Joshua 1:9"},
      {t:`The Lord is good, a refuge in times of trouble. He cares for those who trust in Him.`, r:"Nahum 1:7"},
      {t:`May the God of hope fill you with all joy and peace as you trust in Him, so that you may overflow with hope by the power of the Holy Spirit.`, r:"Romans 15:13"},
      {t:`Therefore, if anyone is in Christ, the new creation has come: The old has gone, the new is here!`, r:"2 Corinthians 5:17"},
      {t:`For where two or three gather in My name, there am I with them.`, r:"Matthew 18:20"},
      {t:`Do not be anxious about anything, but in every situation, by prayer and petition, with thanksgiving, present your requests to God.`, r:"Philippians 4:6"},
      {t:`The Lord bless you and keep you; the Lord make His face shine on you and be gracious to you; the Lord turn His face toward you and give you peace.`, r:"Numbers 6:24-26"},
      {t:`Every trial in life is an opportunity to grow in faith and resilience. Remember that God is with you through it all.`, r:"James 1:2-3 (thought)"},
      {t:`Fear not, for I am with you; be not dismayed, for I am your God. I will strengthen you, I will help you, I will uphold you with My righteous right hand.`, r:"Isaiah 41:10"},
      {t:`Have I not commanded you? Be strong and courageous. Do not be frightened, and do not be dismayed, for the Lord your God is with you wherever you go.`, r:"Joshua 1:9"},
      {t:`For God has not given us a spirit of fear, but of power and of love and of a sound mind.`, r:"2 Timothy 1:7"},
      {t:`The Lord is my light and my salvation—whom shall I fear? The Lord is the stronghold of my life—of whom shall I be afraid?`, r:"Psalm 27:1"},
      {t:`Finally, be strong in the Lord and in His mighty power. Put on the full armor of God, so that you can take your stand against the devil’s schemes.`, r:"Ephesians 6:10-11"},
      {t:`Cast your cares on the Lord and He will sustain you; He will never let the righteous be shaken.`, r:"Psalm 55:22"},
      {t:`Now to Him who is able to do immeasurably more than all we ask or imagine, according to His power that is at work within us.`, r:"Ephesians 3:20"},
      {t:`The name of the Lord is a fortified tower; the righteous run to it and are safe.`, r:"Proverbs 18:10"},
      {t:`Be on your guard; stand firm in the faith; be courageous; be strong. Do everything in love.`, r:"1 Corinthians 16:13-14"},
      {t:`Do not fear, for I have redeemed you; I have summoned you by name; you are Mine.`, r:"Isaiah 43:1"},
      {t:`I sought the Lord, and He answered me; He delivered me from all my fears.`, r:"Psalm 34:4"},
      {t:`We are hard pressed on every side, but not crushed; perplexed, but not in despair; persecuted, but not abandoned; struck down, but not destroyed.`, r:"2 Corinthians 4:8-9"},
      {t:`Greater is He that is in you, than he that is in the world.`, r:"1 John 4:4"},
      {t:`Come to Me, all you who are weary and burdened, and I will give you rest. Take My yoke upon you and learn from Me, for I am gentle and humble in heart, and you will find rest for your souls.`, r:"Matthew 11:28-29"},
      {t:`The Lord gives strength to His people; the Lord blesses His people with peace.`, r:"Psalm 29:11"},
      {t:`May the peace of God, which transcends all understanding, guard your hearts and your minds in Christ Jesus.`, r:"Philippians 4:7"},
      {t:`May the grace of the Lord Jesus Christ, and the love of God, and the fellowship of the Holy Spirit be with you all.`, r:"2 Corinthians 13:14"},
      {t:`May God Himself, the God of peace, sanctify you through and through. May your whole spirit, soul, and body be kept blameless at the coming of our Lord Jesus Christ.`, r:"1 Thessalonians 5:23"},
      {t:`The Lord bless you and keep you; the Lord make His face shine on you and be gracious to you; the Lord turn His face toward you and give you peace.`, r:"Numbers 6:24-26"},
      {t:`May the Lord give strength to His people; may the Lord bless His people with peace.`, r:"Psalm 29:11"},
      {t:`May the Lord direct your hearts into God’s love and Christ’s perseverance.`, r:"2 Thessalonians 3:5"},
      {t:`I pray that out of His glorious riches He may strengthen you with power through His Spirit in your inner being.`, r:"Ephesians 3:16"},
      {t:`May the favor of the Lord our God rest on us; establish the work of our hands for us—yes, establish the work of our hands.`, r:"Psalm 90:17"},
      {t:`May the God of hope fill you with all joy and peace as you trust in Him, so that you may overflow with hope by the power of the Holy Spirit.`, r:"Romans 15:13"},
      {t:`May the Lord give you wisdom in all things and bless you with understanding and discernment in the days ahead.`, r:"James 1:5 (prayer)"},
      {t:`May the Lord bless your going out and your coming in, from this time forth and forevermore.`, r:"Psalm 121:8"},
      {t:`Now may the God of peace Himself give you peace at all times and in every way. The Lord be with all of you.`, r:"2 Thessalonians 3:16"},
      {t:`May our Lord Jesus Christ Himself and God our Father, who loved us and by His grace gave us eternal encouragement and good hope, encourage your hearts and strengthen you in every good deed and word.`, r:"2 Thessalonians 2:16-17"},
      {t:`May you be filled with the knowledge of His will through all the wisdom and understanding that the Spirit gives, so that you may live a life worthy of the Lord and please Him in every way.`, r:"Colossians 1:9-10"},
      {t:`May God pour out His blessings upon you and keep you in His tender care always.`, r:"Psalm 65:11 (paraphrase)"}
    ];

    // --- Logic --------------------------------------------------------------
    const textEl = document.getElementById('text');
    const refEl = document.getElementById('ref');
    const countEl = document.getElementById('count');
    const btnShuffle = document.getElementById('shuffle');
    const btnCopy = document.getElementById('copy');
    const btnShare = document.getElementById('share');

    const KEY = 'promises_seen_v1';
    const getSeen = () => JSON.parse(localStorage.getItem(KEY) || '[]');
    const setSeen = (arr) => localStorage.setItem(KEY, JSON.stringify(arr));

    function pickNext(){
      const seen = new Set(getSeen());
      // Reset after full cycle so each device eventually sees all
      if(seen.size >= PROMISES.length){
        seen.clear();
        setSeen([]);
      }
      const available = PROMISES.map((_,i)=>i).filter(i=>!seen.has(i));
      const i = available[Math.floor(Math.random()*available.length)];
      seen.add(i); setSeen([...seen]);
      render(i, seen.size);
    }

    function render(i, seenCount){
      const p = PROMISES[i];
      textEl.textContent = `“${p.t}”`;
      refEl.textContent = `– ${p.r}`;
      countEl.textContent = `${seenCount}/${PROMISES.length} viewed on this device`;
      if(navigator.share){ btnShare.style.display='inline-block'; }
    }

    btnShuffle.addEventListener('click', pickNext);
    btnCopy.addEventListener('click', async ()=>{
      const text = `${textEl.textContent} ${refEl.textContent}`;
      try{ await navigator.clipboard.writeText(text); btnCopy.textContent='Copied!'; setTimeout(()=>btnCopy.textContent='Copy',1200);}catch(e){ alert('Copied text: '+text); }
    });
    btnShare.addEventListener('click', async ()=>{
      try{ await navigator.share({title:'Daily Promise', text: `${textEl.textContent} ${refEl.textContent}`, url: location.href}); }catch(e){}
    });

    // initial
    pickNext();
  </script>
</body>
</html>
